# 第1章 什么是对象

> 不要低估语言的力量，它通过结构化的语义时时刻刻都在影响着我们周遭的世界。——阿尔弗雷德·科日布斯基

我在这本书里举了一个例子说，面向对象思想相对于程序语言，就好比语言相对于书法、绘画、雕塑等，前者是一种思维方式，后者是前者的具体表现形式。这种比喻估计会把你给整蒙掉，所以我就直接大白话重说一次。

面向对象编程（Object-Oriented Programming，简称OOP）是一种创造编程语言的方式，大概就是说把所有的事情都想象成是一个对象，它有一些属性和方法。比如你要开发一个赛车的游戏程序，我们可以把车当做一个对象来编程，它的属性有品牌、颜色等等，方法有前进、左转和倒车等。我们开发完成后，用户在选择一辆车的时候，相当于我们在程序中创建一个对象给用户；用户最终选定某一个车的时候，相当于给刚刚创建的对象赋予了品牌和颜色；用户控制车的时候相当于在使用这个对象的各种方法。

我知道你会质疑：怎么可能把所有的东西看做对象呢？确实没有人可以保证百分百。但请你现在想一件事或者一个东西，你会发现这种方式确实能把整个世界对象化。比如：`我想要喝奶茶`，可以把`我`当做一个对象，`奶茶`当做一个对象，`我`有一个方法是`想做什么事`，所以这句话相当于使用了`我`的`想做什么事`方法，并且把`奶茶`当做数据告诉了这个方法。

## 抽象的过程

千万别再说抽象是面向对象语言的核心或者基础了，因为抽象在每一种程序语言中都存在。比如用电路的闭合就被机器语言抽象成了0和1；机器语言用0101组成的指令就被汇编语言抽象成了add单词；汇编语言的add单词就被更高级的C、Python或者Java等高级语言抽象成了符号`+`。

所以我们在谈论抽象时，更重要是在说怎么把现实中的问题抽象成程序语言中的表述，比如上面`我想要喝奶茶`的例子。当然，还有其他编程语言会把这个问题抽象成一组方法、一组决策或者一组算法来解决，额……你品，你细品，是不是很难想象怎么搞。这就是Java以及其他面向对象语言目前占据主流的原因，因为用其他编程思想创造出来的程序语言在普适性上不如使用面向对象思想创造出来的程序语言，它们只能在某一些特定问题上表现优异。

你瞧，我们现在一直在说的是对象，但如果你有一些编程基础的话，你会觉得是不是我说错了，一开始不应该先谈谈`类`吗，毕竟对象就是类创造出来的。那是因为语言的创造过程以及我们实际编程时都是先有对象再有类的，不信你自己试试：比如我们想要创造一个`人`这个类，虽然说是要创造一个类，但你首先想到的是一个个的人的对象，有张三、李四、Mary、小田英俊以及你不认识但是想象出来的人，它们是一个个对象，然后你把他们身上可能的姓名、性别、身高、年龄、国籍等等特征集合其他当做属性定义给这个类，把他们身上可能的走、跑、吃饭、工作等方法定义给这个类。明白一点，会让你在实际工作中轻松很多，因为你不需要凭空编造一个类，而只需要提炼出一个类就行。

我们这里说的对象叫做`Object`，我们说的类叫做`Class`。说到这里我们大概可以总结几个规律给你：

1. 一切都可以当做对象，虽然有些绝对，但请你相信这可以做到。
2. 如果我们用的是面向对象的语言，比如我们学的Java，那么可以认为我们写程序时就是在提炼各种类，并且在必要的时候创建出一个个具体的对象，对象和对象之间可以通过使用对象的方法来进行通信。
3. 每个对象都有自己的空间，它可以在内部存放一些自己的属性、方法甚至其他的对象。
4. 既然对象抽象成类，类可以当做模板生成一个个对象，那么每一个对象都有一个类型，也就是说它一定是属于某一个类。当然就会存在很多个对象同属于一个类，那么这些对象之间应该是可以接受相同消息的，即拥有同样的方法，比如他们都拥有`吃饭`这个方法，虽然这个`吃饭`的方法在内部怎么处理可能有所不同，有的人只吃蔬菜，有的人只吃肉。

## 每个对象都应该有接口

如果你有Java编程基础的话，先别误解了这里的`接口`二字。请先想想一下，我们定义了一个类，然后这个类创建了一个对象出来，这个对象要做一些事情的时候，我们怎么要告诉它做什么事情呢？我们必须事先给这个类定义一些方法，然后这个对象才会有这些方法，我们想要发号施令的时候就直接调用这个对象的这个方法即可。说到这里，你有没有发现，如果没有这个方法的话，我们就没办法和这个对象进行对接以让它做我们想让它做的事情，所以这里的方法就被我们称作接口——对接的口儿。

那么我们再回头看看我们Java编程时候新建的那些接口文件，比如`A`，`A`里面主要的就是各个方法，没有实现体，只是定义了很多个方法，我们说过方法就是接口，那么我们只定义很多方法的话，我们不就是在定义接口么，只不多如果一个文件里方法或者说接口很多的话，我们总得给这么多接口起个名字啊，名字就是这个文件的名字，也就是`A`。当然你不嫌麻烦的话，可以一个接口文件中只定义一个方法也就是接口，只要下次如果有一个类要同时实现十几个接口的时候你不骂娘就可以了。

我在书里面举了一个灯（Light）的例子，它有4个接口，分别是`on()`、`off()`、`brighten()`和`dim()`四个接口。我们创建一个等的对象，然后就可以通过调用这个对象的某个接口给这个对象发号施令，比如：
```
Light light = new Light();
light.on();
```

## 每个对象都可以提供服务

前面我们说过对象通过提供接口也就是方法，让外界和它通信，比如发号施令之类的，这不就相当于这个对象在给我们提供服务嘛。但是，重点不在这。重点在于告诉我们，编程的时候，想清楚目的是很重要的，你想要实现什么样的目的或者想要一个什么样的服务，只有想清楚了，你的类啊接口啊才能定义得很好。

## 继承

我们说每一个类都可以定义属性和方法，但如果你一直这么定义的话，你会感到厌倦，因为你会发现有时候类和类中的东西十分相似，这个时候你相当于写了2遍，更糟糕的是，如果其中有一个方法写错了，你要修改的话，要修改2遍。

这个时候，继承就出现了。继承就是儿子继承老子的那种。所以假如A类有1个属性和1个方法，那么B类通过关键字`extends`继承这个A类的话，B类就自动拥有了这1个属性和1个方法，不需要写出来，如果B类有其他A类不具有的属性和方法，那么只需要写那些A类不具有的属性和方法即可。如果你觉得A类中的某个方法不适合，想改成B类自己的，那么只需要在B类中重新写一遍这个方法即可，相当于覆盖了A类本来要继承给它的方法。这里我们把A类一般称为父类，把B类称为子类。
```
class A extends B{

}
```

## 隐藏，这是个严肃的问题

我们举例说了类里面有很多方法或者说成接口或者服务，甭管哪种说法，听上去挺不让人放心的，因为感觉这些接口会被任意调用给玩坏了。你考虑的很好，设计者也觉得应该做一些控制，于是弄了3个访问修饰符：`public`、`private`和`protected`。这三个修饰符可以放在类的前面，决定这个类是否可以访问以及可以被什么人访问。但更多时候是放在类中的方法和属性前面，决定这些方法和属性是否可以访问以及可以被什么人访问。

从名字你就能大概猜出来什么意思：

1. `public`表示任何人都可以访问。
2. `private`表示只有类自己以及自己内部才能访问。
3. `protected`比`private`多了一个，就是子类也可以访问。
4. 如果你没有标明访问修饰符，它默认不是上面3个中的一个，而是是`default`，它表示的是只可以被同一个包范围内的类去访问，同一个包你可以理解成同一个路径，每个文件第一行都有包名比如`package com.example.demo.service;`，表示这个文件其实就是service文件夹中的一个文件，那么这个文件中如果定义了一个省略访问修饰符，即`default`的方法的话，那么只有在同一个service目录下的文件才能访问这个方法。

访问权限控制并不是指类的封装。你从字面上就能理解，封装不一定需要访问权限，你只需要把需要的东西统统塞进这个类里，然后这个类统一对外提供服务，你就可以说你封装了一个类。只能说，加入了访问控制可以让封装更实用，否则你封装在一个类中的所有方法都能被访问的话，既不安全也容易因为暴露太多让使用它的人感到无从下手。

